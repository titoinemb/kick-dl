"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const child_process_1=require("child_process"),fs_1=require("fs"),path_1=require("path");exports.default=async({url:e,name:o})=>{if(!e||""===e.trim())return"invalid url";const r=(0,path_1.join)(process.env.HOME||"","Videos","kick-dlp");(0,fs_1.mkdirSync)(r,{recursive:!0});const s=(0,path_1.join)(r,`${o}.mp4`);(0,fs_1.existsSync)(s)&&(0,fs_1.unlinkSync)(s);const t=`ffmpeg -i "${e}" -c copy -bsf:a aac_adtstoasc "${s}" 2>&1`;return new Promise((e,o)=>{const r=(0,child_process_1.exec)(t,{maxBuffer:10485760},(r,t,c)=>r?o(`Error executing command: ${r.message}`):c?o(`ffmpeg error: ${c.trim()}`):(e(`Download complete! The file is located at: ${s}`),void console.log(`Download complete! The file is located at: ${s}`)));r.stdout?.on("data",e=>{console.log(e.toString())}),r.stderr?.on("data",e=>{console.error(e.toString())}),r.on("error",e=>{o(`Failed to start ffmpeg: ${e.message}`)})})};