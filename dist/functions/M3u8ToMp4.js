"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const child_process_1=require("child_process"),fs_1=require("fs"),path_1=require("path");exports.default=async({url:e,name:o})=>{if(!e||""===e.trim())return"invalid url";let r=(0,path_1.join)(process.env.HOME||"","Videos","kick-dlp");(0,fs_1.mkdirSync)(r,{recursive:!0});let s=(0,path_1.join)(r,`${o}.mp4`);(0,fs_1.existsSync)(s)&&(0,fs_1.unlinkSync)(s);let t=`ffmpeg -i "${e}" -c copy -bsf:a aac_adtstoasc "${s}"`;return new Promise((e,o)=>{let r=(0,child_process_1.exec)(t);r.stdout?.on("data",e=>{console.log(e.toString())}),r.stderr?.on("data",e=>{console.error(e.toString())}),r.on("error",e=>{o(`Error: ${e.message}`)}),r.on("close",r=>{0!==r?o(`Process exited with code: ${r}`):(e(`Download complete! The file is located at: ${s}`),console.log(`Download complete! The file is located at: ${s}`))})})};