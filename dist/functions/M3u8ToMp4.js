"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const child_process_1=require("child_process"),fs_1=require("fs"),path_1=require("path");exports.default=async({url:e,name:r})=>{if(!e||""===e.trim())return"invalid url";let s=(0,path_1.join)(process.env.HOME||"","Videos","kick-dl");(0,fs_1.mkdirSync)(s,{recursive:!0});let t=(0,path_1.join)(s,`${r}.mp4`);(0,fs_1.existsSync)(t)&&(0,fs_1.unlinkSync)(t);let o=`ffmpeg -i "${e}" -c copy -bsf:a aac_adtstoasc "${t}"`;return new Promise((e,r)=>{let s=(0,child_process_1.exec)(o);s.stdout?.on("data",e=>{console.log(e.toString())}),s.stderr?.on("data",e=>{console.error(e.toString())}),s.on("error",e=>{r(`Erreur: ${e.message}`)}),s.on("close",s=>{0!==s?r(`Processus terminé avec le code: ${s}`):e(`Téléchargement terminé : ${t}`)})})};