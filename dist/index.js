#!/usr/bin/env node
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const GetM3u8File_1=__importDefault(require("./functions/GetM3u8File")),M3u8ToMp4_1=__importDefault(require("./functions/M3u8ToMp4")),child_process_1=require("child_process");let args=process.argv[2];function isJSON(e){if("string"==typeof e)try{return JSON.parse(e),!0}catch(e){return!1}return!0}(async e=>{(0,child_process_1.exec)("ffmpeg -version",async(t,r,o)=>{if(t&&(console.log("FFmpeg is not installed. Please install FFmpeg from https://ffmpeg.org/download.html and make sure it's in your PATH."),process.exit(1)),!e||""===e.trim())return console.log("Invalid URL, command example: node index.js URL");let i=await(0,GetM3u8File_1.default)(e);if(isJSON(i)){let e=i.file,t=i.name;return e&&t?(await(0,M3u8ToMp4_1.default)({name:t,url:e}),process.exit()):console.log("Error fetching the VOD")}return console.log("Error fetching the VOD")})})(args?args.toString():"");