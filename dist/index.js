#!/usr/bin/env node
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const GetM3u8File_1=__importDefault(require("./functions/GetM3u8File")),M3u8ToMp4_1=__importDefault(require("./functions/M3u8ToMp4"));let args=process.argv[2];function isJSON(e){if("string"==typeof e)try{return JSON.parse(e),!0}catch(e){return!1}return!0}(async e=>{if(!e||""===e.trim())return console.log("Invalid URL, command example: node index.js URL");const{chromium:t}=require("playwright");try{await t.launch()}catch(e){console.log("Chromium is not installed, installing...");const{execSync:t}=require("child_process");t("npx playwright install chromium",{stdio:"inherit"})}let r=await(0,GetM3u8File_1.default)(e);if(isJSON(r)){let e=r.file,t=r.name;return e&&t?(await(0,M3u8ToMp4_1.default)({name:t,url:e}),process.exit()):console.log("Error fetching the VOD")}console.log("Error fetching the VOD")})(args?args.toString():"");